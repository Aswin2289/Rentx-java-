
<app-nav></app-nav>
<div class="w-full h-full pt-10  bg-white">
  <div class=" bg-white justify-center px-6 md:flex md:space-x-8 xl:px-0">

    <div class="w-full h-screen pt-10 mb-0">
      <div
        class=" justify-center px-6 md:flex md:space-x-6 xl:px-0"
      >
        <div class="rounded-lg xs:w-1/2  md:w-1/2 ">
        <div class="bg-white min-w-full shadow-lg">

          <!-- (keydown)="onAccordionKeyDown($event) " (keyup)="onAccordionKeyUp($event)" -->

          <mat-accordion (keydown.Space)="$event.stopPropagation()"  >
            <mat-expansion-panel class="pointer-events-{{pointerLogin}}" hideToggle>
              <mat-expansion-panel-header >
                <mat-panel-title >
                  Login 
                  <svg class="ml-2" *ngIf="loginTick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" enable-background="new 0 0 64 64" width="16" height="16">
                    <path d="M32,2C15.431,2,2,15.432,2,32c0,16.568,13.432,30,30,30c16.568,0,30-13.432,30-30C62,15.432,48.568,2,32,2z M25.025,50 l-0.02-0.02L24.988,50L11,35.6l7.029-7.164l6.977,7.184l21-21.619L53,21.199L25.025,50z" fill="#43a047" />
                  </svg>
                   </mat-panel-title>
         
              </mat-expansion-panel-header>
        <button 
        class="mt-6 w-full rounded-md bg-blue-600 py-1.5 font-medium text-gray-200 hover:bg-blue-600"
         (click)="openDeliveryAdress()">Next</button>
            </mat-expansion-panel>
          
            <mat-expansion-panel class="pointer-events-{{pointerAddress}}" (keyup)="resetAccordion()"     [(expanded)]="panel2Expanded" >
              <mat-expansion-panel-header class="pointer-events-none"  #panelH (click)="panelH._toggle()">
                <mat-panel-title  >
                  Delivery Address 
                  <svg class="ml-2" *ngIf="addressTick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" enable-background="new 0 0 64 64" width="16" height="16">
                    <path d="M32,2C15.431,2,2,15.432,2,32c0,16.568,13.432,30,30,30c16.568,0,30-13.432,30-30C62,15.432,48.568,2,32,2z M25.025,50 l-0.02-0.02L24.988,50L11,35.6l7.029-7.164l6.977,7.184l21-21.619L53,21.199L25.025,50z" fill="#43a047" />
                  </svg>
                </mat-panel-title>
                <mat-panel-description>
                </mat-panel-description>
              </mat-expansion-panel-header>
                <!-- Address list -->
<div >
 

  <form     class="pointer-events-auto">
    <div *ngFor="let address of addressList" class=" align-top mb-4">
      <div class="flex w-full items-center">
        <input type="radio" name="selectedUser" (input)="pickAddress($event, address)"  [value]="address.id" class="form-radio text-blue-500" />
        <div class="pl-4 w-full">
          <label class="text-sm">{{address.name | titlecase }}<p class="text-xs">+91-{{address.phone}},</p></label>
          <p class="text-xs">{{address.houseName | titlecase}}, {{address.city | titlecase}}, {{address.state | titlecase}}, {{address.pinCode}}</p>
        </div>
        <div>
          <button class="w-full justify-end" [matMenuTriggerFor]="menu">
            <svg class="w-6 h-6 text-gray-600" fill="currentColor" viewBox="0 0 24 24">
              <path
                d="M12 4c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2zm0 2c.552 0 1 .448 1 1s-.448 1-1 1-1-.448-1-1 .448-1 1-1zM12 10c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2zm0 2c.552 0 1 .448 1 1s-.448 1-1 1-1-.448-1-1 .448-1 1-1zM12 16c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2zm0 2c.552 0 1 .448 1 1s-.448 1-1 1-1-.448-1-1 .448-1 1-1z"
              />
            </svg>
          </button>
          <mat-menu #menu="matMenu">
            <button mat-menu-item   (click)="getAddressById(address.id)">Edit</button>
            <button mat-menu-item (click)="requestHandle(address)" >Delete</button>
          </mat-menu></div>
        </div>
        </div>
     

  
    <!-- Submit button or other form actions -->
  </form>
</div>

<!-- edit Address -->

<div *ngIf="editDivActivater" id="addAddress" class=" bg-white flex items-center pb-4 pt-10 justify-evenly ">
  <form [formGroup]="editAddressDetailsForm">
    <div   >
      <div  class="border-b border-gray-900/10 pb-12">
        <h2 class=" font-poppins_semi_bold text-2xl pt-4  text-blue-500">
          Edit Address Information
        </h2>
        <p class=" text-sm leading-6 text-gray-500">
          Edit address where you can receive your order.
        </p>
        <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
          

          <div class="sm:col-span-2 sm:col-start-1">
            <label
              for="city"
              class="block text-sm font-medium leading-6 text-gray-900"
              >Name</label
            >
            <div class="mt-2">
              <input maxlength="20"
                formControlName="name"
                type="text"
                [ngModel]="currentAddress.name"
                name="name"
                id="name"
                autocomplete="address-level2"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm sm:leading-6"
              />
              <ng-container
              *ngIf="
              editAddressDetailsForm.get('name')?.dirty ||
                editAddressDetailsForm.get('name')?.touched ||
                formSubmitted
              "
            >
              <span
                class="text-red-500 text text-sm"
                *ngIf="editAddressDetailsForm.get('name')?.errors?.['required']"
              >
              Name cannot be left blank.
              </span>
             
              <span class="text-red-500 text-sm">
                {{editAddressDetailsForm.get('name')?.errors?.['pattern'] ? 'Enter valid Name.': 
                editAddressDetailsForm.get('name')?.errors?.['minlength'] ? 'Enter valid Name.': ''
                }}
              </span>
            </ng-container>


            </div>
          </div>

          <div class="sm:col-span-2">
            <label
              for="region"
              class="block text-sm font-medium leading-6 text-gray-900"
              >House Name</label
            >
            <div class="mt-2">
              <input maxlength="20"
                formControlName="houseName"
                type="text"
                [ngModel]="currentAddress.houseName"
                name="houseName"
                id="houseName"
                autocomplete="address-level1"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm sm:leading-6"
              />
              <ng-container
              *ngIf="
              editAddressDetailsForm.get('houseName')?.dirty ||
                editAddressDetailsForm.get('houseName')?.touched ||
                formSubmitted
              "
            >
              <span
                class="text-red-500 text text-sm"
                *ngIf="editAddressDetailsForm.get('houseName')?.errors?.['required']"
              >
              House Name cannot be left blank.
              </span>
             
              <span class="text-red-500 text-sm">
                {{editAddressDetailsForm.get('houseName')?.errors?.['pattern'] ? 'Enter valid houseName.': 
                editAddressDetailsForm.get('houseName')?.errors?.['minlength'] ? 'Enter valid houseName.': ''
                }}
              </span>
            </ng-container>


            </div>
          </div>

          <div class="sm:col-span-2">
            <label
              for="postal-code"
              class="block text-sm font-medium leading-6 text-gray-900"
              >Phone Number</label
            >
            <div class="mt-2">
              <input maxlength="15"
                formControlName="phone"
                type="text"
                [ngModel]="currentAddress.phone"
                name="postal-code"
                id="postal-code"
                autocomplete="postal-code"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm sm:leading-6"
              />
              <ng-container
              *ngIf="
              editAddressDetailsForm.get('phone')?.dirty ||
                editAddressDetailsForm.get('phone')?.touched ||
                formSubmitted
              "
            >
              <span
                class="text-red-500 text text-sm"
                *ngIf="editAddressDetailsForm.get('phone')?.errors?.['required']"
              >
              Phone cannot be left blank.
              </span>
             
              <span class="text-red-500 text-sm">
                {{editAddressDetailsForm.get('phone')?.errors?.['pattern'] ? 'Enter valid phone': 
                editAddressDetailsForm.get('phone')?.errors?.['minlength'] ? 'Enter valid phone.': ''
                }}
              </span>
            </ng-container>
            </div>
          </div>
        </div>
        <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
          

          <div class="sm:col-span-2 sm:col-start-1">
            <label
              for="city"
              class="block text-sm font-medium leading-6 text-gray-900"
              >City</label
            >
            <div class="mt-2">
              <input maxlength="20"
                formControlName="city"
                [ngModel]="currentAddress.city"
                type="text"
                name="city"
                id="city"
                autocomplete="address-level2"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm sm:leading-6"
              />
              <ng-container
              *ngIf="
              editAddressDetailsForm.get('city')?.dirty ||
                editAddressDetailsForm.get('city')?.touched ||
                formSubmitted
              "
            >
              <span
                class="text-red-500 text text-sm"
                *ngIf="editAddressDetailsForm.get('city')?.errors?.['required']"
              >
                City cannot be left blank.
              </span>
             
              <span class="text-red-500 text-sm">
                {{editAddressDetailsForm.get('city')?.errors?.['pattern'] ? 'Enter valid City Name.': 
                editAddressDetailsForm.get('city')?.errors?.['minlength'] ? 'Enter valid City Name.': ''
                }}
              </span>
            </ng-container>


            </div>
          </div>

          <div class="sm:col-span-2">
            <label
              for="region"
              class="block text-sm font-medium leading-6 text-gray-900"
              >State / Province</label
            >
            <div class="mt-2">
              <input maxlength="20"
                formControlName="state"
                [ngModel]="currentAddress.state"
                type="text"
                name="region"
                id="region"
                autocomplete="address-level1"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm sm:leading-6"
              />
              <ng-container
              *ngIf="
              editAddressDetailsForm.get('state')?.dirty ||
                editAddressDetailsForm.get('state')?.touched ||
                formSubmitted
              "
            >
              <span
                class="text-red-500 text text-sm"
                *ngIf="editAddressDetailsForm.get('state')?.errors?.['required']"
              >
                State cannot be left blank.
              </span>
             
              <span class="text-red-500 text-sm">
                {{editAddressDetailsForm.get('state')?.errors?.['pattern'] ? 'Enter valid State.': 
                editAddressDetailsForm.get('state')?.errors?.['minlength'] ? 'Enter valid State.': ''
                }}
              </span>
            </ng-container>


            </div>
          </div>

          <div class="sm:col-span-2">
            <label
              for="postal-code"
              class="block text-sm font-medium leading-6 text-gray-900"
              >Pin Code</label
            >
            <div class="mt-2">
              <input maxlength="8"
                formControlName="pinCode"
                type="text"
                name="postal-code"
                [ngModel]="currentAddress.pinCode"
                id="postal-code"
                autocomplete="postal-code"
                class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm sm:leading-6"
              />
              <ng-container
              *ngIf="
              editAddressDetailsForm.get('pinCode')?.dirty ||
                editAddressDetailsForm.get('pinCode')?.touched ||
                formSubmitted
              "
            >
              <span
                class="text-red-500 text text-sm"
                *ngIf="editAddressDetailsForm.get('pinCode')?.errors?.['required']"
              >
                Pin Code cannot be left blank.
              </span>
             
              <span class="text-red-500 text-sm">
                {{editAddressDetailsForm.get('pinCode')?.errors?.['pattern'] ? 'Enter valid Zip Code.': 
                editAddressDetailsForm.get('pinCode')?.errors?.['minlength'] ? 'Enter valid Zip Code.': ''
                }}
              </span>
            </ng-container>
            </div>
          </div>
        </div>
        <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
          



          <div class="sm:col-span-2">
            <label
            for="tpe"
            class="block text-sm font-medium leading-6 text-gray-900"
            >Type</label>
            <div class="mt-2">
              <div class="flex items-center">
                <input
                  formControlName="type"
                  type="radio"
                  [ngModel]="currentAddress.type"
                  id="type-office"
                  name="type"
                  [value]="0"
                  class="mr-1"
                />
                <label for="type-home" class="text-sm leading-5 text-gray-700 flex items-center align-middle">
                  <span class="mx-1">
                    <svg width="18" height="17" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home">
                      <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                      <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                  </span>
                  Home
                </label>
              </div>
              <ng-container
              *ngIf="
              editAddressDetailsForm.get('type')?.dirty ||
                editAddressDetailsForm.get('type')?.touched ||
                formSubmitted
              "
            >
              <span
                class="text-red-500 text text-sm"
                *ngIf="editAddressDetailsForm.get('type')?.errors?.['required']"
              >
              Pick atleast one type.
              </span>
             
              <span class="text-red-500 text-sm">
                {{editAddressDetailsForm.get('type')?.errors?.['pattern'] ? 'Enter valid State.': 
                editAddressDetailsForm.get('type')?.errors?.['minlength'] ? 'Enter valid State.': ''
                }}
              </span>
            </ng-container>


            </div>
          </div>

          <div class="sm:col-span-2">
            <label
              for="postal-code"
              class="block text-sm font-medium leading-6 text-gray-900"
              >&nbsp;</label
            >
            <div class="mt-2">
              <div class="flex items-center">
                <input
                  formControlName="type"
                  type="radio"
                  [ngModel]="currentAddress.type"
                  id="type-office"
                  name="type"
                  [value]="1"
                  class="mr-1"
                />
                <label for="type-home" class="text-sm leading-5 text-gray-700 flex items-center align-middle">
                  <span class="mx-1">
       
       
       
                    <svg width="20" height="20" stroke="" stroke-width="0.5" viewBox="0 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                      <g id="Page-1"   fill="none" fill-rule="evenodd">
                          <g id="icon" fill="currentColor" transform="translate(42.666667, 64.000000)">
                              <path d="M320,1.42108547e-14 L320,85.333 L405.333333,85.3333333 L405.333,341.333 L426.666667,341.333333 L426.666667,384 L320,383.999 L320,384 L106.666667,384 L106.666,383.999 L3.55271368e-14,384 L3.55271368e-14,341.333333 L21.333,341.333 L21.3333333,149.333333 L106.666,149.333 L106.666667,1.42108547e-14 L320,1.42108547e-14 Z M277.333333,42.6666667 L149.333333,42.6666667 L149.333333,341.333333 L192,341.333333 L192,277.333333 L234.666667,277.333333 L234.666667,341.333333 L277.333333,341.333333 L277.333333,42.6666667 Z M362.666667,128 L320,128 L320,341.333333 L362.666667,341.333333 L362.666667,128 Z M106.666667,192 L64,192 L64,341.333333 L106.666667,341.333333 L106.666667,192 Z M234.666667,170.666667 L234.666667,213.333333 L192,213.333333 L192,170.666667 L234.666667,170.666667 Z M234.666667,85.3333333 L234.666667,128 L192,128 L192,85.3333333 L234.666667,85.3333333 Z" id="Combined-Shape">
                               </path></g></g>
                  </svg>
                </span>
                  Office
                </label>
              </div>
              <ng-container
              *ngIf="
              editAddressDetailsForm.get('type')?.dirty ||
                editAddressDetailsForm.get('type')?.touched ||
                formSubmitted
              "
            >
              <span
                class="text-red-500 text text-sm"
                *ngIf="editAddressDetailsForm.get('type')?.errors?.['required']"
              >
              Pick atleast one type.
              </span>
             
              <span class="text-red-500 text-sm">
                {{editAddressDetailsForm.get('type')?.errors?.['pattern'] ? 'Enter valid type.': 
                editAddressDetailsForm.get('type')?.errors?.['minlength'] ? 'Enter valid type.': ''
                }}
              </span>
            </ng-container>
            </div>
          </div>
          <div class="sm:col-span-2 sm:col">
            <label
              for="tpe"
              class="block text-sm font-medium leading-6 text-gray-900"
              >&nbsp;</label
            >
            <div class="mt-2">
              <div class="flex items-center">
                <input
                  formControlName="type"
                  type="radio"
                  [ngModel]="currentAddress.type"
                  id="type-others"
                  name="type"
                  [value]="2"
                  class="mr-1"
                />
                <label for="type-home" class="text-sm leading-5 text-gray-700 flex items-center align-middle">
                  <span class="mx-1">
                    <svg fill="currentColor" width="21" height="19" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" stroke="none"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M30,25.11H29v-.89a2,2,0,0,0-2-2H26V14.11h1a2,2,0,0,0,2-2v-.89h2a1,1,0,0,0,.43-1.9l-15-7.22a1,1,0,0,0-.86,0L.57,9.32A1,1,0,0,0,1,11.22H3v.89a2,2,0,0,0,2,2H6v8.11H5a2,2,0,0,0-2,2v.89H2a2,2,0,0,0-2,2V29a1,1,0,0,0,1,1H31a1,1,0,0,0,1-1V27.11A2,2,0,0,0,30,25.11Zm-14-21L26.62,9.22H5.38Zm-11,8v-.89H27v.89H5Zm19,2v8.11H21.5V14.11Zm-4.5,0v8.11H17V14.11Zm-4.5,0v8.11H12.5V14.11Zm-4.5,0v8.11H8V14.11ZM5,24.22H27v.89H5ZM30,28H2v-.89H30Z"></path> </g></svg>         </span>
                  Others
                </label>
              </div>
              <ng-container
              *ngIf="
              editAddressDetailsForm.get('type')?.dirty ||
                editAddressDetailsForm.get('type')?.touched ||
                formSubmitted
              "
            >
              <span
                class="text-red-500 text text-sm"
                *ngIf="editAddressDetailsForm.get('type')?.errors?.['required']"
              >
              Pick atleast one type.
              </span>
             
              <span class="text-red-500 text-sm">
                {{editAddressDetailsForm.get('type')?.errors?.['pattern'] ? 'Enter valid City Name.': 
                editAddressDetailsForm.get('type')?.errors?.['minlength'] ? 'Enter valid City Name.': ''
                }}
              </span>
            </ng-container>


            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="mt-6 flex items-center justify-evenly gap-x-6 ">
      <button 
      (click)="addressEditFormOff()"
      type="submit" class="text-white"
      class="rounded-md bg-white-500 px-16 py-2 text-sm border border-blue-500  text-blue-500 shadow-sm hover:bg-blue-500 hover:text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500">
  Back
    </button> <button 
        (click)="updateAddress()" 
   
        type="submit"
        class="rounded-md bg-blue-500 px-16 py-2 text-sm  text-white shadow-sm hover:bg-blue-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 disabled:bg-blue-400"
      >
        Update Address
      </button>
    </div>
  </form>
</div>


                <!-- Address Add -->
                
                <div *ngIf="addressDivActivator" >
               <button (click)="addNewAddress()" [disabled]="addressList.length>=5"  class="text-blue-500 disabled:text-gray-400"> Add New Address +</button>
                  </div>
           
              <div 
              class="  pb-4 max-w-xl rounded-lg bg-white p-6 shadow-md sm:flex sm:justify-evenly relative"

              *ngIf="!addressDivActivator">


              <div id="addAddress" class=" bg-white flex items-center justify-evenly ">
                <form [formGroup]="AddressDetailsForm">
                  <div class="">
                    <div class="border-b border-gray-900/10 pb-12">
                      <h2 class=" font-poppins_semi_bold text-2xl pt-4  text-blue-500">
                        Address Information
                      </h2>
                      <p class=" text-sm leading-6 text-gray-500">
                        Add address where you can receive your order.
                      </p>
                      <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
                        
              
                        <div class="sm:col-span-2 sm:col-start-1">
                          <label
                            for="city"
                            class="block text-sm font-medium leading-6 text-gray-900"
                            >Name</label
                          >
                          <div class="mt-2">
                            <input maxlength="20"
                              formControlName="name"
                              type="text"
                              name="name"
                              id="name"
                              autocomplete="address-level2"
                              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm sm:leading-6"
                            />
                            <ng-container
                            *ngIf="
                              AddressDetailsForm.get('name')?.dirty ||
                              AddressDetailsForm.get('name')?.touched ||
                              formSubmitted
                            "
                          >
                            <span
                              class="text-red-500 text text-sm"
                              *ngIf="AddressDetailsForm.get('name')?.errors?.['required']"
                            >
                            Name cannot be left blank.
                            </span>
                           
                            <span class="text-red-500 text-sm">
                              {{AddressDetailsForm.get('name')?.errors?.['pattern'] ? 'Enter valid Name.': 
                              AddressDetailsForm.get('name')?.errors?.['minlength'] ? 'Enter valid Name.': ''
                              }}
                            </span>
                          </ng-container>
              
              
                          </div>
                        </div>
              
                        <div class="sm:col-span-2">
                          <label
                            for="region"
                            class="block text-sm font-medium leading-6 text-gray-900"
                            >House Name</label
                          >
                          <div class="mt-2">
                            <input maxlength="20"
                              formControlName="houseName"
                              type="text"
                              name="houseName"
                              id="houseName"
                              autocomplete="address-level1"
                              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm sm:leading-6"
                            />
                            <ng-container
                            *ngIf="
                              AddressDetailsForm.get('houseName')?.dirty ||
                              AddressDetailsForm.get('houseName')?.touched ||
                              formSubmitted
                            "
                          >
                            <span
                              class="text-red-500 text text-sm"
                              *ngIf="AddressDetailsForm.get('houseName')?.errors?.['required']"
                            >
                            House Name cannot be left blank.
                            </span>
                           
                            <span class="text-red-500 text-sm">
                              {{AddressDetailsForm.get('houseName')?.errors?.['pattern'] ? 'Enter valid houseName.': 
                              AddressDetailsForm.get('houseName')?.errors?.['minlength'] ? 'Enter valid houseName.': ''
                              }}
                            </span>
                          </ng-container>
              
              
                          </div>
                        </div>
              
                        <div class="sm:col-span-2">
                          <label
                            for="postal-code"
                            class="block text-sm font-medium leading-6 text-gray-900"
                            >Phone Number</label
                          >
                          <div class="mt-2">
                            <input maxlength="15"
                              formControlName="phone"
                              type="text"
                              name="postal-code"
                              id="postal-code"
                              autocomplete="postal-code"
                              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm sm:leading-6"
                            />
                            <ng-container
                            *ngIf="
                              AddressDetailsForm.get('phone')?.dirty ||
                              AddressDetailsForm.get('phone')?.touched ||
                              formSubmitted
                            "
                          >
                            <span
                              class="text-red-500 text text-sm"
                              *ngIf="AddressDetailsForm.get('phone')?.errors?.['required']"
                            >
                            Phone cannot be left blank.
                            </span>
                           
                            <span class="text-red-500 text-sm">
                              {{AddressDetailsForm.get('phone')?.errors?.['pattern'] ? 'Enter valid phone': 
                              AddressDetailsForm.get('phone')?.errors?.['minlength'] ? 'Enter valid phone.': ''
                              }}
                            </span>
                          </ng-container>
                          </div>
                        </div>
                      </div>
                      <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
                        
              
                        <div class="sm:col-span-2 sm:col-start-1">
                          <label
                            for="city"
                            class="block text-sm font-medium leading-6 text-gray-900"
                            >City</label
                          >
                          <div class="mt-2">
                            <input maxlength="20"
                              formControlName="city"
                              type="text"
                              name="city"
                              id="city"
                              autocomplete="address-level2"
                              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm sm:leading-6"
                            />
                            <ng-container
                            *ngIf="
                              AddressDetailsForm.get('city')?.dirty ||
                              AddressDetailsForm.get('city')?.touched ||
                              formSubmitted
                            "
                          >
                            <span
                              class="text-red-500 text text-sm"
                              *ngIf="AddressDetailsForm.get('city')?.errors?.['required']"
                            >
                              City cannot be left blank.
                            </span>
                           
                            <span class="text-red-500 text-sm">
                              {{AddressDetailsForm.get('city')?.errors?.['pattern'] ? 'Enter valid City Name.': 
                              AddressDetailsForm.get('city')?.errors?.['minlength'] ? 'Enter valid City Name.': ''
                              }}
                            </span>
                          </ng-container>
              
              
                          </div>
                        </div>
              
                        <div class="sm:col-span-2">
                          <label
                            for="region"
                            class="block text-sm font-medium leading-6 text-gray-900"
                            >State / Province</label
                          >
                          <div class="mt-2">
                            <input maxlength="20"
                              formControlName="state"
                              type="text"
                              name="region"
                              id="region"
                              autocomplete="address-level1"
                              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm sm:leading-6"
                            />
                            <ng-container
                            *ngIf="
                              AddressDetailsForm.get('state')?.dirty ||
                              AddressDetailsForm.get('state')?.touched ||
                              formSubmitted
                            "
                          >
                            <span
                              class="text-red-500 text text-sm"
                              *ngIf="AddressDetailsForm.get('state')?.errors?.['required']"
                            >
                              State cannot be left blank.
                            </span>
                           
                            <span class="text-red-500 text-sm">
                              {{AddressDetailsForm.get('state')?.errors?.['pattern'] ? 'Enter valid State.': 
                              AddressDetailsForm.get('state')?.errors?.['minlength'] ? 'Enter valid State.': ''
                              }}
                            </span>
                          </ng-container>
              
              
                          </div>
                        </div>
              
                        <div class="sm:col-span-2">
                          <label
                            for="postal-code"
                            class="block text-sm font-medium leading-6 text-gray-900"
                            >Pin Code</label
                          >
                          <div class="mt-2">
                            <input maxlength="8"
                              formControlName="pinCode"
                              type="text"
                              name="postal-code"
                              id="postal-code"
                              autocomplete="postal-code"
                              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm sm:leading-6"
                            />
                            <ng-container
                            *ngIf="
                              AddressDetailsForm.get('pinCode')?.dirty ||
                              AddressDetailsForm.get('pinCode')?.touched ||
                              formSubmitted
                            "
                          >
                            <span
                              class="text-red-500 text text-sm"
                              *ngIf="AddressDetailsForm.get('pinCode')?.errors?.['required']"
                            >
                              Pin Code cannot be left blank.
                            </span>
                           
                            <span class="text-red-500 text-sm">
                              {{AddressDetailsForm.get('pinCode')?.errors?.['pattern'] ? 'Enter valid Zip Code.': 
                              AddressDetailsForm.get('pinCode')?.errors?.['minlength'] ? 'Enter valid Zip Code.': ''
                              }}
                            </span>
                          </ng-container>
                          </div>
                        </div>
                      </div>
                      <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
                        
              
              
              
                        <div class="sm:col-span-2">
                          <label
                          for="tpe"
                          class="block text-sm font-medium leading-6 text-gray-900"
                          >Type</label>
                          <div class="mt-2">
                            <div class="flex items-center">
                              <input
                                formControlName="type"
                                type="radio"
                                id="type-office"
                                name="type"
                                value="0"
                                class="mr-1"
                              />
                              <label for="type-home" class="text-sm leading-5 text-gray-700 flex items-center align-middle">
                                <span class="mx-1">
                                  <svg width="18" height="17" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home">
                                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                                  </svg>
                                </span>
                                Home
                              </label>
                            </div>
                            <ng-container
                            *ngIf="
                              AddressDetailsForm.get('type')?.dirty ||
                              AddressDetailsForm.get('type')?.touched ||
                              formSubmitted
                            "
                          >
                            <span
                              class="text-red-500 text text-sm"
                              *ngIf="AddressDetailsForm.get('type')?.errors?.['required']"
                            >
                            Pick atleast one type.
                            </span>
                           
                            <span class="text-red-500 text-sm">
                              {{AddressDetailsForm.get('type')?.errors?.['pattern'] ? 'Enter valid State.': 
                              AddressDetailsForm.get('type')?.errors?.['minlength'] ? 'Enter valid State.': ''
                              }}
                            </span>
                          </ng-container>
              
              
                          </div>
                        </div>
              
                        <div class="sm:col-span-2">
                          <label
                            for="postal-code"
                            class="block text-sm font-medium leading-6 text-gray-900"
                            >&nbsp;</label
                          >
                          <div class="mt-2">
                            <div class="flex items-center">
                              <input
                                formControlName="type"
                                type="radio"
                                id="type-office"
                                name="type"
                                value="1"
                                class="mr-1"
                              />
                              <label for="type-home" class="text-sm leading-5 text-gray-700 flex items-center align-middle">
                                <span class="mx-1">
                     
                     
                     
                                  <svg width="20" height="20" stroke="" stroke-width="0.5" viewBox="0 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                    <g id="Page-1"   fill="none" fill-rule="evenodd">
                                        <g id="icon" fill="currentColor" transform="translate(42.666667, 64.000000)">
                                            <path d="M320,1.42108547e-14 L320,85.333 L405.333333,85.3333333 L405.333,341.333 L426.666667,341.333333 L426.666667,384 L320,383.999 L320,384 L106.666667,384 L106.666,383.999 L3.55271368e-14,384 L3.55271368e-14,341.333333 L21.333,341.333 L21.3333333,149.333333 L106.666,149.333 L106.666667,1.42108547e-14 L320,1.42108547e-14 Z M277.333333,42.6666667 L149.333333,42.6666667 L149.333333,341.333333 L192,341.333333 L192,277.333333 L234.666667,277.333333 L234.666667,341.333333 L277.333333,341.333333 L277.333333,42.6666667 Z M362.666667,128 L320,128 L320,341.333333 L362.666667,341.333333 L362.666667,128 Z M106.666667,192 L64,192 L64,341.333333 L106.666667,341.333333 L106.666667,192 Z M234.666667,170.666667 L234.666667,213.333333 L192,213.333333 L192,170.666667 L234.666667,170.666667 Z M234.666667,85.3333333 L234.666667,128 L192,128 L192,85.3333333 L234.666667,85.3333333 Z" id="Combined-Shape">
                                             </path></g></g>
                                </svg>
                              </span>
                                Office
                              </label>
                            </div>
                            <ng-container
                            *ngIf="
                              AddressDetailsForm.get('type')?.dirty ||
                              AddressDetailsForm.get('type')?.touched ||
                              formSubmitted
                            "
                          >
                            <span
                              class="text-red-500 text text-sm"
                              *ngIf="AddressDetailsForm.get('type')?.errors?.['required']"
                            >
                            Pick atleast one type.
                            </span>
                           
                            <span class="text-red-500 text-sm">
                              {{AddressDetailsForm.get('type')?.errors?.['pattern'] ? 'Enter valid type.': 
                              AddressDetailsForm.get('type')?.errors?.['minlength'] ? 'Enter valid type.': ''
                              }}
                            </span>
                          </ng-container>
                          </div>
                        </div>
                        <div class="sm:col-span-2 sm:col">
                          <label
                            for="tpe"
                            class="block text-sm font-medium leading-6 text-gray-900"
                            >&nbsp;</label
                          >
                          <div class="mt-2">
                            <div class="flex items-center">
                              <input
                                formControlName="type"
                                type="radio"
                                id="type-others"
                                name="type"
                                value="2"
                                class="mr-1"
                              />
                              <label for="type-home" class="text-sm leading-5 text-gray-700 flex items-center align-middle">
                                <span class="mx-1">
                                  <svg fill="currentColor" width="21" height="19" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" stroke="none"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M30,25.11H29v-.89a2,2,0,0,0-2-2H26V14.11h1a2,2,0,0,0,2-2v-.89h2a1,1,0,0,0,.43-1.9l-15-7.22a1,1,0,0,0-.86,0L.57,9.32A1,1,0,0,0,1,11.22H3v.89a2,2,0,0,0,2,2H6v8.11H5a2,2,0,0,0-2,2v.89H2a2,2,0,0,0-2,2V29a1,1,0,0,0,1,1H31a1,1,0,0,0,1-1V27.11A2,2,0,0,0,30,25.11Zm-14-21L26.62,9.22H5.38Zm-11,8v-.89H27v.89H5Zm19,2v8.11H21.5V14.11Zm-4.5,0v8.11H17V14.11Zm-4.5,0v8.11H12.5V14.11Zm-4.5,0v8.11H8V14.11ZM5,24.22H27v.89H5ZM30,28H2v-.89H30Z"></path> </g></svg>         </span>
                                Others
                              </label>
                            </div>
                            <ng-container
                            *ngIf="
                              AddressDetailsForm.get('type')?.dirty ||
                              AddressDetailsForm.get('type')?.touched ||
                              formSubmitted
                            "
                          >
                            <span
                              class="text-red-500 text text-sm"
                              *ngIf="AddressDetailsForm.get('type')?.errors?.['required']"
                            >
                            Pick atleast one type.
                            </span>
                           
                            <span class="text-red-500 text-sm">
                              {{AddressDetailsForm.get('type')?.errors?.['pattern'] ? 'Enter valid City Name.': 
                              AddressDetailsForm.get('type')?.errors?.['minlength'] ? 'Enter valid City Name.': ''
                              }}
                            </span>
                          </ng-container>
              
              
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="mt-6 flex items-center justify-evenly gap-x-6 ">
                    <button 
                    (click)="addressFormOff()"
                    type="submit" class="text-white"
                    class="rounded-md bg-white-500 px-16 py-2 text-sm border border-blue-500  text-blue-500 shadow-sm hover:bg-blue-500 hover:text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500">
                Back
                  </button> <button
                      (click)="onAddressDetailsSubmit()"
                      type="submit"
                      class="rounded-md bg-blue-500 px-16 py-2 text-sm  text-white shadow-sm hover:bg-blue-400  focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 disabled:bg-blue-400"
                    >
                      Add Address
                    </button>
                  
                  </div>
                </form>
              </div>
              

                </div>
              <button *ngIf="addressDivActivator" [disabled]="!orderAddress"
              class="mt-6 w-full rounded-md bg-blue-600 py-1.5 font-medium text-gray-200 hover:bg-blue-600  disabled:bg-blue-400"
              (click)="openOrderSummary()">Deliver Here</button>
             
              <!-- Content of the second accordion panel -->
            </mat-expansion-panel>
          
            <mat-expansion-panel class="pointer-events-{{pointerSummary}} min-w-0"   (keyup)="resetAccordion()"   [(expanded)]="panel3Expanded" >
              <mat-expansion-panel-header class="pointer-events-none"  #panelH (click)="panelH._toggle()">
                <mat-panel-title >
                  Order Summary <svg class="ml-2 max-w-45" *ngIf="orderSummaryTick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" enable-background="new 0 0 64 64" width="16" height="16">
                    <path d="M32,2C15.431,2,2,15.432,2,32c0,16.568,13.432,30,30,30c16.568,0,30-13.432,30-30C62,15.432,48.568,2,32,2z M25.025,50 l-0.02-0.02L24.988,50L11,35.6l7.029-7.164l6.977,7.184l21-21.619L53,21.199L25.025,50z" fill="#43a047" />
                  </svg>
                </mat-panel-title>
                <mat-panel-description>
                  
                </mat-panel-description>
                
              </mat-expansion-panel-header>
              <div
                  *ngFor="let product of cartData; let i = index"
                  class="justify-between mb-6 rounded-lg bg-white p-6 shadow-md sm:flex sm:justify-start relative"
                  >
                  <div class="flex justify-center sm:justify-end">
                  
                    <img
                      src="{{ product.thumbnail }}"
                      alt="product-image"
                      class="w-48 h-48 object-contain rounded-lg sm:w-24 sm:h-24 sm:items-center"
                    />
                  </div>
                  <div class="sm:ml-4 sm:flex sm:w-full sm:justify-between mb-6">
                    <div class="mt-5 sm:mt-0">
                      <h2 class="text-sm font-semi-bold text-gray-900 sm:text-xl">
                        {{ product.productName }}
                      </h2>
                      <p class="mt-1 text-xs text-gray-700">
                        {{ product.categoryName }}
                      </p>  
                      <p class="mt-2 text-xs text-gray-700">
                        From  {{ product.startDate |date }} to {{ product.endDate| date }}
                      </p>  
                      <p class="mt-2 text-xs text-gray-700">
                      Qty:{{product.quantity}} for {{product.dateDifference}} day(s)
                      </p>  
                      <p class="mt-2 text-xs text-gray-700">
                    
                      </p>  

                    </div>
                  
                    <div
                      class="flex justify-start sm:space-y-6 sm:mt-8 sm:block sm:space-x-1"
                    >
                  
                  
                      <div class="pr-2 w-full justify-end items-center">
                        <p class="text-sm w-full" >
                          {{ product.price | number }} Rs<span
                            class="font-poppins text-xs text-gray-400"
                            >/day</span>
                        </p>
                        <p class="flex text-blue-500 mt-6 text-lg font-semibold align-bottom">
                          Total: {{ product.priceIncludedDate | number }} Rs
                        </p>
                        
                        
                        
                      </div>
                    </div>
                  </div>
                  </div>
                  <div>
                    <button (click)="openDeliveryAdress()"  class="text-blue-500"> Change Delivery Address?</button>
                       </div>
                               <button
              class="mt-6 w-full rounded-md bg-blue-600 py-1.5 font-medium text-gray-200 hover:bg-blue-600  disabled:bg-blue-400"
              (click)="(openPaymentMethod())">Proceed to Payment</button>
            </mat-expansion-panel>
          
            <mat-expansion-panel  [(expanded)]="panel4Expanded" (keyup)="resetAccordion()">
              <mat-expansion-panel-header  class="pointer-events-none"  >
                <mat-panel-title>
                  Payment Options 
                  <svg class="ml-2" *ngIf="paymentTick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" enable-background="new 0 0 64 64" width="16" height="16">
                    <path d="M32,2C15.431,2,2,15.432,2,32c0,16.568,13.432,30,30,30c16.568,0,30-13.432,30-30C62,15.432,48.568,2,32,2z M25.025,50 l-0.02-0.02L24.988,50L11,35.6l7.029-7.164l6.977,7.184l21-21.619L53,21.199L25.025,50z" fill="#43a047" />
                  </svg>
                </mat-panel-title>
                <mat-panel-description>
                </mat-panel-description>
              </mat-expansion-panel-header>
              <div class="flex flex-col space-y-2">
                <form  class="pointer-events-auto">
                  <div *ngFor="let payment of paymentMethodData" class=" align-top mb-4">
                    <div class="flex w-full items-center">
                      <input type="radio"   (input)="pickPayment($event, payment)" name="selectedUser" formControlName="paymentId" [value]="payment.id" class="form-radio text-blue-500" />
                      <div class="pl-4 w-full">
                        <label class="text-sm">{{payment.name | titlecase }}</label>
                         </div>
                    
                      </div>
                      </div>
                </form>
              </div>
              <div>
                <button (click)="openOrderSummary()"  class="text-blue-500"> Check order summary?</button>
                   </div>
              <button [disabled]="!orderPayment"
              class="mt-6 w-full rounded-md bg-blue-600 py-1.5 font-medium text-gray-200 hover:bg-blue-600 disabled:bg-blue-400"
              (click)="placeOrder()">Place Order</button>
            </mat-expansion-panel>
          </mat-accordion>
          
        </div>
        </div>
        <!-- Sub total -->
        <div
          class="mt-6 h-full rounded-lg border bg-white p-6 shadow-md md:mt-0 md:w-80"
        >
          <div class="mb-2 flex justify-between">
            <p class="text-gray-700">Subtotal</p>
            <p class="text-gray-700">{{  totalPrice | number }}</p>
          </div>
          <div class="mb-2 flex justify-between">
            <p class="text-gray-700">No of Items</p>
            <p class="text-gray-700">{{ currentCount }}</p>
          </div>
          <div class="flex justify-between">
            <p class="text-gray-700">VAT</p>
            <p class="text-gray-700">{{ totalPrice * 0.1 | number }}</p>
          </div>
          <hr class="my-4" />
          <div class="flex justify-between">
            <p class="text-lg text-blue-500 font-bold">Total Payable</p>
            <div class="">
              <p class="mb-1 text-lg text-blue-500  font-bold">
                {{vatIncludedPrice}}Rs
              </p>
              <p class="text-xs text-gray-700">including VAT</p>
            </div>
          </div>
          
        </div>
      </div>
    </div>
  </div>
</div>